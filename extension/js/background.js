!function(){"use strict";function r(r){for(var e=[r.selectedText,r.startContainerText,r.endContainerText,r.commonAncestorText],s=null,o=null,t=0;t<e.length;t++)"string"==typeof e[t]&&("string"!=typeof s&&(s=n(e[t])),"number"!=typeof o&&(o=a(e[t])));return{currency:s,value:o}}function a(r){var a=r.match(/\d[\d\., ]*k?/gi);if(a&&1===a.length){var n=parseFloat(a[0].replace(/[^\d\.]/g,""));return a[0].match(/k/i)&&(n*=1e3),n}return null}function n(r){var a=d(function(a,n){return-1!==r.indexOf(n)});if(1===o(a))for(var n in a)return n;var e=d(function(a){var n=0;return a.symbols.forEach(function(a){-1!==r.indexOf(a)&&n++}),n>0&&n}),s=d(function(a){var n=0;return a.words.forEach(function(a){r.match(new RegExp(a,"i"))&&n++}),n>0&&n});e=i(e),s=i(s);var t=Object.keys(l(e,s));return(t=t.sort(function(r,a){return h[r]&&h[a]?h[a].share-h[r].share:0})).length>0?t[0]:null}function e(r,a){var n=[];for(var e in a)n.push({currency:e,name:h[e].name,value:f(e,u(r*a[e],3),!1),rate:u(a[e],5)});return n}function s(r,a,n){var e="https://api.fixer.io/latest?base="+r,s=new XMLHttpRequest;return s.addEventListener("readystatechange",function(){if(4===this.readyState)if(200==this.status){var r=null;try{r=JSON.parse(this.responseText)}catch(r){n({message:"Couldn't parse response data."})}r&&r.rates&&a(r.rates)}else n({message:this.statusText,code:this.status})}),s.open("GET",e,!0),s.send(null),s}function o(r){var a=0;for(var n in r)a++;return a}function t(r,a){var n={};for(var e in r)a(r[e],e)&&(n[e]=r[e]);return n}function i(r){var a;for(var n in r)(r[n]>a||void 0===a)&&(a=r[n]);return t(r,function(r){return r===a})}function l(){var r={};return[].forEach.call(arguments,function(a){if("object"==typeof a&&null!==a)for(var n in a)r[n]=a[n]}),r}function u(r,a){if("number"!=typeof r)return r;var n=r.toString().split("."),e=n[0],s=n[1]||"",o=m(e),t=a-e.length,i="";if(1==t&&(t=2),t>0)for(var l=0;l<t;l++)i+=void 0!==s[l]?s[l]:"0";var u=o;return i.length>0&&(u+="."+i),u}function m(r){if("string"==typeof r||"number"==typeof r){var a=parseInt(r);if("number"!=typeof a||0==a)return r}for(var n="",e=0,s=r.length-1;s>=0;s--)n=r[s]+n,++e>=3&&s>0&&(n=","+n,e=0);return n}function d(r){var a={};for(var n in h){var e=r(h[n],n);!1!==e&&(a[n]=e)}return a}function f(r,a,n){var e=a;return h[r]&&(e=(e=(e=h[r].format).replace(/\%d/g,a)).replace(/\%s/g,!1!==n?r:"")),"string"==typeof e?e.trim():a}var h={AUD:{name:"Australian Dollar",share:6.9,symbols:["$","A$"],format:"$%d %s",words:["australian","dollar"]},BGN:{name:"Bulgarian Lev",share:null,symbols:["лв","lv"],format:"%dлв",words:["bulgarian","lev","българ","лев"]},BRL:{name:"Brazilian Real",share:1,symbols:["$","R$"],format:"R$%d %s",words:["brazilian","real","reais"]},CAD:{name:"Canadian Dollar",share:5.1,symbols:["$","Can$","C$"],format:"$%d %s",words:["canadian","dollar"]},CHF:{name:"Swiss Franc",share:4.8,symbols:["Fr.","SFr."],format:"%d francs",words:["swiss","franc","franken","franchi"]},CNY:{name:"Chinese Yuan",share:4,symbols:["元","¥"],format:"¥ %d",words:["chinese","yuan","人民币"]},CZK:{name:"Czech Koruna",share:null,symbols:["Kč"],format:"%d Kč",words:["czech","koruna","česká","koruny","české"]},DKK:{name:"Danish Krone",share:null,symbols:["kr","kr."],format:"%d kroner",words:["danish","krone","kroner"]},EUR:{name:"Euro",share:37.4,symbols:["€"],format:"€%d %s",words:["euro"]},GBP:{name:"British Pound",share:12.8,symbols:["£"],format:"£%d %s",words:["great","british","pound","sterling","quid"]},HKD:{name:"Hong Kong Dollar",share:1.7,symbols:["$","HK$","元"],format:"$%d %s",words:["hong","kong","dollar","港元","Góng yùn"]},HRK:{name:"Croatian Kuna",share:null,symbols:["kn"],format:"%d kn",words:["croatian","hrvatska","kuna"]},HUF:{name:"Hungarian Forint",share:null,symbols:["Ft"],format:"%d Ft",words:["hungarian","forint"]},IDR:{name:"Indonesian Rupiah",share:null,symbols:["Rp"],format:"Rp %d",words:["indonesian","rupiah","perak"]},ILS:{name:"Israeli New Shekel",share:null,symbols:["₪"],format:"₪%d %s",words:["israeli","shekel","שֶׁקֶל","חָדָשׁ‎","شيقل","جديد","shēqel","jadīd"]},INR:{name:"Indian Rupee",share:1.1,symbols:["₹"],format:"₹%d %s",words:["indian","rupee","rupiya"]},JPY:{name:"Japanese Yen",share:21.6,symbols:["¥","円","圓"],format:"¥%d %s",words:["japanese","yen","円","圓"]},KRW:{name:"South Korean Won",share:1.7,symbols:["₩"],format:"₩%d %s",words:["south","korea","won","원"]},MXN:{name:"Mexican Peso",share:1.9,symbols:["$","Mex$"],format:"$%d %s",words:["mexican","peso"]},MYR:{name:"Malaysian Ringgit",share:null,symbols:["RM"],format:"RM%d",words:["malaysian","ringgit"]},NOK:{name:"Norwegian Krone",share:1.7,symbols:["kr"],format:"%d kr",words:["norwegian","krone"]},NZD:{name:"New Zealand Dollar",share:2.1,symbols:["$"],format:"$%d %s",words:["zealand","dollar","Tāra","Aotearoa","kiwi"]},PHP:{name:"Philippine Peso",share:null,symbols:["₱"],format:"₱%d %s",words:["philippine","peso","piso","pilipinas"]},PLN:{name:"Polish Zloty",share:null,symbols:["zł"],format:"%dzł",words:["polish","zloty","złoty"]},RON:{name:"Romanian Leu",share:null,symbols:["leu"],format:"%d lei",words:["romanian","leu","lei"]},RUB:{name:"Russian Ruble",share:1.1,symbols:["₽","руб"],format:"%d₽",words:["russian","ruble","рубль","рубли́"]},SEK:{name:"Swedish Krona",share:2.2,symbols:["kr"],format:"%d kr",words:["swedish","krona","kronor","spänn","pix","daler","riksdaler","crowns","bagare","bagis","lök"]},SGD:{name:"Singapore Dollar",share:1.8,symbols:["$","S$"],format:"S$%d %s",words:["singapore","dollar"]},THB:{name:"Thai Baht",share:null,symbols:["฿"],format:"฿%d %s",words:["thai","baht","บาท"]},TRY:{name:"Turkish Lira",share:1.4,symbols:["₺"],format:"₺%d %s",words:["turkish","lira","Türk","lirası"]},USD:{name:"US Dollar",share:80.6,symbols:["$"],format:"$%d %s",words:["united","states","u.s.","american","dollar","buck"]},ZAR:{name:"South African Rand",share:1,symbols:["R"],format:"R %d",words:["south","african","rand"]}};chrome.runtime.onMessage.addListener(function(a,n,e){if(n.tab&&a.getWorthy&&a.data){var s=r(a.data);return e({title:f(s.currency,u(s.value,3)),currency:s.currency,value:s.value}),!0}}),chrome.runtime.onMessage.addListener(function(r,a,n){if(a.tab&&r.getRates)return s(r.currency,function(a){n({list:e(r.value,a)})},function(r){n(r)}),!0})}();