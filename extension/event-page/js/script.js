!function(){"use strict";function r(r){for(var n=[r.selectedText,r.startContainerText,r.endContainerText,r.commonAncestorText],s=null,o=null,t=0;t<n.length;t++)"string"==typeof n[t]&&"number"!=typeof o&&(o=e(n[t]));if("number"==typeof o)for(t=0;t<n.length;t++)"string"==typeof n[t]&&"string"!=typeof s&&(s=a(n[t]));return{currency:s,value:o}}function e(r){var e=/([\d\., ]*\d)([a-z]?)/gi.exec(r);if(e&&e.length){var a=e[1],n=e[2],s=parseFloat(a.replace(/[^\d\.]/g,""));if(n)for(var o in c.modifierCharacters)n.match(new RegExp(o,"i"))&&(s*=c.modifierCharacters[o]);else for(var o in c.modifierWords)r.match(new RegExp(o,"i"))&&(s*=c.modifierWords[o]);return s}return null}function a(r){var e=d(function(e,a){return-1!==r.indexOf(a)});if(1===o(e))for(var a in e)return a;var n=d(function(e){var a=0;return e.symbols.forEach(function(e){("string"==typeof e&&-1!==r.indexOf(e)||"object"==typeof e&&e instanceof RegExp&&r.match(e))&&a++}),a>0&&a}),s=d(function(e){var a=0;return e.words.forEach(function(e){r.match(new RegExp(e,"i"))&&a++}),a>0&&a});n=i(n),s=i(s);var t=Object.keys(l(n,s));return(t=t.sort(function(r,e){return y[r]&&y[e]?y[e].share-y[r].share:0})).length>0?t[0]:null}function n(r,e,a){chrome.storage.local.get("currencies",function(n){var s=[];n.currencies.forEach(function(a){y[a]&&e[a]&&s.push({currency:a,name:y[a].name,value:f(a,u(r*e[a],3),!1),rate:u(e[a],5)})}),a(s)})}function s(r,e,a){var n=c.getAPIURL(r),s=new XMLHttpRequest;return s.addEventListener("readystatechange",function(){if(4===this.readyState)if(200==this.status){var r=null;try{r=JSON.parse(this.responseText)}catch(r){a({message:"Couldn't parse response data."})}r&&r.rates&&e(r.rates)}else a({message:this.statusText,code:this.status})}),s.open("GET",n,!0),s.send(null),s}function o(r){var e=0;for(var a in r)e++;return e}function t(r,e){var a={};for(var n in r)e(r[n],n)&&(a[n]=r[n]);return a}function i(r){var e;for(var a in r)(r[a]>e||void 0===e)&&(e=r[a]);return t(r,function(r){return r===e})}function l(){var r={};return[].forEach.call(arguments,function(e){if("object"==typeof e&&null!==e)for(var a in e)r[a]=e[a]}),r}function u(r,e){if("number"!=typeof r)return r;var a=r.toString().split("."),n=a[0],s=a[1]||"",o=m(n),t=e-n.length,i="";if(1==t&&(t=2),t>0)for(var l=0;l<t;l++)i+=void 0!==s[l]?s[l]:"0";var u=o;return i.length>0&&(u+="."+i),u}function m(r){if("string"==typeof r||"number"==typeof r){var e=parseInt(r);if("number"!=typeof e||0==e)return r}for(var a="",n=0,s=r.length-1;s>=0;s--)a=r[s]+a,++n>=3&&s>0&&(a=","+a,n=0);return a}function d(r){var e={};for(var a in y){var n=r(y[a],a);!1!==n&&(e[a]=n)}return e}function f(r,e,a){var n=e;return y[r]&&(n=(n=(n=y[r].format).replace(/\%d/g,e)).replace(/\%s/g,!1!==a?r:"")),"string"==typeof n?n.trim():e}var c={getAPIURL:function(r){return"https://api.fixer.io/latest?base="+r},modifierCharacters:{k:1e3,m:1e6,b:1e9,t:1e12},modifierWords:{thousand:1e3,million:1e6,billion:1e9,trillion:1e12}},h={currencies:["USD","EUR","JPY","GBP","AUD"]};chrome.runtime.onInstalled.addListener(function(r){chrome.storage.local.get(h,function(r){console.log("Existing data",r),chrome.storage.local.set(r,function(){console.log("Updated data.")})})});var y={AUD:{name:"Australian Dollar",share:6.9,symbols:["$","A$"],format:"$%d %s",words:["australian","dollar"]},BGN:{name:"Bulgarian Lev",share:null,symbols:[/lv\b/i,"лв"],format:"%dлв",words:["bulgarian","lev","българ","лев"]},BRL:{name:"Brazilian Real",share:1,symbols:["$","R$"],format:"R$%d %s",words:["brazilian","real","reais"]},CAD:{name:"Canadian Dollar",share:5.1,symbols:["$","Can$","C$"],format:"$%d %s",words:["canadian","dollar"]},CHF:{name:"Swiss Franc",share:4.8,symbols:["Fr.","SFr."],format:"%d francs",words:["swiss","franc","franken","franchi"]},CNY:{name:"Chinese Yuan",share:4,symbols:["¥","元","RMB"],format:"¥ %d %s",words:["chinese","yuan","yuán","renminbi","rénmínbì","人民币"]},CZK:{name:"Czech Koruna",share:null,symbols:[/Kč/i],format:"%d Kč",words:["czech","koruna","česká","ceska","koruny","české","ceske"]},DKK:{name:"Danish Krone",share:null,symbols:[/kr\b/i],format:"%s %d kroner",words:["danish","krone","kroner"]},EUR:{name:"Euro",share:37.4,symbols:["€"],format:"€%d %s",words:["euro"]},GBP:{name:"British Pound",share:12.8,symbols:["£"],format:"£%d %s",words:["great","british","pound","sterling","quid"]},HKD:{name:"Hong Kong Dollar",share:1.7,symbols:["$","HK$","元"],format:"$%d %s",words:["hong","kong","dollar","港元","Góng yùn"]},HRK:{name:"Croatian Kuna",share:null,symbols:[/kn\b/i],format:"%d kn",words:["croatian","hrvatska","kuna"]},HUF:{name:"Hungarian Forint",share:null,symbols:[/Ft\b/],format:"%d Ft",words:["hungarian","forint"]},IDR:{name:"Indonesian Rupiah",share:null,symbols:["Rp"],format:"Rp %d",words:["indonesian","rupiah","perak"]},ILS:{name:"Israeli New Shekel",share:null,symbols:["₪"],format:"₪%d %s",words:["israeli","shekel","שֶׁקֶל","חָדָשׁ‎","شيقل","جديد","shēqel","jadīd"]},INR:{name:"Indian Rupee",share:1.1,symbols:["₹"],format:"₹%d %s",words:["indian","rupee","rupiya"]},JPY:{name:"Japanese Yen",share:21.6,symbols:["¥","円","圓"],format:"¥%d %s",words:["japanese","yen","円","圓"]},KRW:{name:"South Korean Won",share:1.7,symbols:["₩"],format:"₩%d %s",words:["south","korea","won","원"]},MXN:{name:"Mexican Peso",share:1.9,symbols:["$","Mex$"],format:"$%d %s",words:["mexican","peso"]},MYR:{name:"Malaysian Ringgit",share:null,symbols:["RM"],format:"RM%d",words:["malaysian","ringgit"]},NOK:{name:"Norwegian Krone",share:1.7,symbols:[/kr\b/i],format:"%s %d kr",words:["norwegian","krone"]},NZD:{name:"New Zealand Dollar",share:2.1,symbols:["$"],format:"$%d %s",words:["zealand","dollar","Tāra","Aotearoa","kiwi"]},PHP:{name:"Philippine Peso",share:null,symbols:["₱"],format:"₱%d %s",words:["philippine","peso","piso","pilipinas"]},PLN:{name:"Polish Zloty",share:null,symbols:["zł",/zl\b/i],format:"%dzł",words:["polish","zloty","złoty"]},RON:{name:"Romanian Leu",share:null,symbols:[/leu\b/i],format:"%d lei",words:["romanian","leu","lei"]},RUB:{name:"Russian Ruble",share:1.1,symbols:["₽","руб"],format:"%d₽",words:["russian","ruble","рубль","рубли́"]},SEK:{name:"Swedish Krona",share:2.2,symbols:[/kr\b/i],format:"%s %d kr",words:["swedish","krona","kronor","spänn","pix","daler","riksdaler","crowns","bagare","bagis","lök"]},SGD:{name:"Singapore Dollar",share:1.8,symbols:["$","S$"],format:"S$%d %s",words:["singapore","dollar"]},THB:{name:"Thai Baht",share:null,symbols:["฿"],format:"฿%d %s",words:["thai","baht","บาท"]},TRY:{name:"Turkish Lira",share:1.4,symbols:["₺"],format:"₺%d %s",words:["turkish","lira","Türk","lirası"]},USD:{name:"US Dollar",share:80.6,symbols:["$","US"],format:"$%d %s",words:["united","states","u.s.","american","dollar","buck"]},ZAR:{name:"South African Rand",share:1,symbols:[/R\b/],format:"R %d",words:["south","african","rand"]}};chrome.runtime.onMessage.addListener(function(r,e,a){r.getCurrencies&&a(y)}),chrome.runtime.onMessage.addListener(function(e,a,n){if(e.getWorthy&&e.data){var s=r(e.data);return n("string"==typeof s.currency&&"number"==typeof s.value&&0!=parseInt(s.value)?{title:f(s.currency,u(s.value,3)),currency:s.currency,value:s.value}:!1),!0}}),chrome.runtime.onMessage.addListener(function(r,e,a){if(r.getRates)return s(r.currency,function(e){n(r.value,e,function(r){a({list:r})})},function(r){a(r)}),!0})}();