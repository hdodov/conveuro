!function(){"use strict";!function(){function e(){i&&i.close(),(i=new Dropdown(r[0])).renderPlaceholderList(3),i.setTitle("---"),i.onDestroy=function(){i=null,o=null}}function n(n){i||e(),i.renderPlaceholderList(3),i.setTitle(n.title),i.setLoading(!0);var t=Date.now();c=t,chrome.runtime.sendMessage({getRates:!0,currency:n.currency,value:n.value},function(e){t===c&&(i.setLoading(!1),e.list?i.renderList(e.list):i.renderError(e))}),setTimeout(function(){i.show()},150)}var t=$(".input-convertor"),r=$(".converted-container"),i=null,c=null,o=null;t.keyup(function(){chrome.runtime.sendMessage({getWorthy:!0,data:{selectedText:t.val()}},function(e){e&&o!==e.title&&(o=e.title,n(e))})}),t.focus()}(),function(){var e=$(".input-currencies"),n=null;e.selectize({persist:!0,highlight:!0,labelField:["code"],valueField:["code"],searchField:["code","name"],sortField:[{field:"share",direction:"desc"},{field:"name",direction:"asc"}],onChange:function(e){chrome.storage.local.set({currencies:e.split(",")})},render:{option:function(e,n){return'<div class="option"><span class="name">'+e.name+'</span><span class="code">'+e.code+"</span></div>"}}}),n=e[0].selectize,chrome.runtime.sendMessage({getCurrencies:!0},function(e){var t=[];for(var r in e)t.push({code:r,share:e[r].share||0,name:e[r].name});n.addOption(t),chrome.storage.local.get("currencies",function(e){e.currencies.forEach(function(e){n.addItem(e,!0)})})})}()}();